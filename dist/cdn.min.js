(()=>{function q(i){let C=async e=>{try{let r=await fetch(e);if(!r.ok)throw r.status;return await r.text()}catch(r){throw r}},S=e=>new DOMParser().parseFromString(`<body><template>${e}</template></body>`,"text/html"),I=(...e)=>[...new Set(e.flatMap(r=>r.split(/\s+/)))].join(" "),h=e=>{let r=Array.from(e.querySelectorAll("[data-slot]"));return e.querySelectorAll("template").forEach(a=>{r.push(...h(a.content))}),r},L=(e,r)=>{for(let a of e.attributes){if(a.name==="_class"||a.name==="rc-class"){r.className=I(a.value,r.className);continue}a.name.startsWith("rc-")?r.setAttribute(a.name.substring(3),a.value):a.name.startsWith("_")&&r.setAttribute(a.name.substring(1),a.value)}},W=(e,r)=>{h(r).forEach(o=>{let d=(e.content??e).querySelector(`template[data-for-slot='${o.dataset.slot}']`);if(!d){o.replaceWith(...o.childNodes);return}o.replaceWith(d.content.cloneNode(!0))})},f=(e,r,a={})=>{e.dispatchEvent(new CustomEvent(r,{detail:a,bubbles:!0,composed:!0,cancelable:!0}))},y=e=>new Promise(r=>setTimeout(r,e)),p=e=>e[0]==="/",w=e=>e[0]==="#",b={swap:"outer",trigger:"load",watch:null,name:"",isRunning:!1,initialized:!1,responseHTML:null,requestDelay:0,swapDelay:0,"process-slots-first":!1,urlPrefix:""};i.$rc={defaultConfig:{...b}},i.directive("remote-component",(e,{value:r,modifiers:a,expression:o},{evaluate:g,cleanup:d})=>{let c=async()=>{if(t.initialized||t.isRunning)return;t.isRunning=!0,f(e,"rc-before-load",t);let s=null,l=o,n=i.$data(e);!p(o)&&!w(o)&&(l=g(o)),t.requestDelay&&await y(t.requestDelay),n._rcIsLoading=!0,n._rcIsLoadingWithDelay=!0;let _;if(p(l)){let m;try{m=await C(t.urlPrefix+l)}catch(D){n._rcError=D,n._rcIsLoading=!1,n._rcIsLoadingWithDelay=!1,t.isRunning=!1,f(e,"rc-error",{error:D,config:t});return}n._rcError=null,n._rcIsLoading=!1,t.responseHTML=m,f(e,"rc-loaded",t),_=S(m)}if(t.swapDelay&&await y(t.swapDelay),f(e,"rc-loaded-with-delay",t),n._rcIsLoadingWithDelay=!1,p(l)?s=_.querySelector("template")?.content:w(l)&&(s=document.querySelector(l)?.content.cloneNode(!0)),s){if(W(e,s),L(e,s.firstElementChild),t.swap==="inner")e.replaceChildren(s),f(e,"rc-inserted",t);else if(t.swap==="outer"){let m=s.firstChild;e.replaceWith(s),f(m,"rc-inserted",t)}}t.initialized=!0,t.isRunning=!1},u=[i.addScopeToNode(e,{_rc:{config:{...i.$rc.defaultConfig},trigger:c}}),i.addScopeToNode(e,i.reactive({_rcIsLoading:!1,_rcIsLoadingWithDelay:!1,_rcError:null}))],t=i.$data(e)._rc.config;i.nextTick(()=>{t["process-slots-first"]&&e.querySelectorAll("[data-for-slot]").forEach(l=>{Array.from(l.content.children).forEach(n=>{i.initTree(n)})}),f(e,"rc-initialized",i.$data(e)._rc),t.trigger==="reactive"&&t.watch&&(g(t.watch)?c():i.$data(e).$watch(t.watch,l=>{l&&c()})),t.trigger==="load"&&c()}),d(()=>{u.forEach(s=>s())})}).before("on"),i.directive("rc",(e,{value:r,modifiers:a,expression:o},{evaluate:g})=>{let d=t=>{let[s,l=0,n=0]=t.split(" ");return{trigger:s,requestDelay:parseInt(l),swapDelay:parseInt(n)}},c=o,u=i.$data(e)._rc.config;if(r===null){let t={...g(c)};if(t.trigger){let s=d(t.trigger);t=Object.assign(t,s)}u=Object.assign(u,b,t);return}if(r==="process-slots-first"&&(c=!0),r==="trigger"){let t=d(c);u=Object.assign(u,t);return}u[r]=c})}document.addEventListener("alpine:init",()=>{Alpine.plugin(q)});})();

(()=>{function D(o){let p={swap:"outer",trigger:"load",watch:null,name:"",isRunning:!1,initialized:!1,responseHTML:null,requestDelay:0,swapDelay:0,"process-slots-first":!1,source:null},y=["trigger","swap","watch","name","process-slots-first"],E=async e=>{try{let t=await fetch(e);if(!t.ok)throw t.status;return await t.text()}catch(t){throw t}},I=e=>new DOMParser().parseFromString(`<body><template>${e}</template></body>`,"text/html"),L=(...e)=>[...new Set(e.flatMap(t=>t.split(/\s+/)))].join(" "),w=e=>{let t=Array.from(e.querySelectorAll("[data-slot]"));return e.querySelectorAll("template").forEach(a=>{t.push(...w(a.content))}),t},q=(e,t)=>{for(let a of e.attributes){if(a.name==="_class"||a.name==="rc-class"){t.className=L(a.value,t.className);continue}a.name.startsWith("rc-")?t.setAttribute(a.name.substring(3),a.value):a.name.startsWith("_")&&t.setAttribute(a.name.substring(1),a.value)}},S=(e,t)=>{w(t).forEach(c=>{let u=(e.content??e).querySelector(`template[data-for-slot='${c.dataset.slot}']`);if(!u){c.replaceWith(...c.childNodes);return}c.replaceWith(u.content.cloneNode(!0))})},g=(e,t,a)=>{if(e.hasAttribute(t)){let c=e.getAttribute(t);e.removeAttribute(t),e.setAttribute(a,c)}},x=()=>{class e extends HTMLElement{connectedCallback(){g(this,"source","x-remote-component"),y.forEach(a=>{g(this,a,"x-rc:"+a)})}}customElements.define("x-component",e)},T=e=>{Array.isArray(e)&&e.forEach(t=>{if(!t.tag||!t.source)return;class a extends HTMLElement{connectedCallback(){this.setAttribute("x-remote-component",t.source),y.forEach(l=>{t[l]!==void 0&&this.setAttribute("x-rc:"+l,t[l]),g(this,l,"x-rc:"+l)})}}customElements.define("x-"+t.tag,a)})},f=(e,t,a={})=>{e.dispatchEvent(new CustomEvent(t,{detail:a,bubbles:!0,composed:!0,cancelable:!0}))},b=e=>new Promise(t=>setTimeout(t,e)),h=e=>e[0]==="/",C=e=>e[0]==="#";o.$rc={defaultConfig:{...p},makeCustomElementComponents:T},x(),o.directive("remote-component",(e,{expression:t},{evaluate:a,cleanup:c})=>{let l=async()=>{if(r.initialized||r.isRunning)return;r.isRunning=!0,f(e,"rc-before-load",r);let s=null,i=t,n=o.$data(e);!h(t)&&!C(t)&&(i=a(t)),r.source=i,r.requestDelay&&await b(r.requestDelay),n._rcIsLoading=!0,n._rcIsLoadingWithDelay=!0;let m;if(h(i)){let d;try{d=await E(i)}catch(_){n._rcError=_,n._rcIsLoading=!1,n._rcIsLoadingWithDelay=!1,r.isRunning=!1,f(e,"rc-error",{error:_,config:r});return}n._rcError=null,n._rcIsLoading=!1,r.responseHTML=d,f(e,"rc-loaded",r),m=I(d)}if(r.swapDelay&&await b(r.swapDelay),f(e,"rc-loaded-with-delay",r),n._rcIsLoadingWithDelay=!1,h(i))s=m.querySelector("template")?.content;else if(C(i)&&(s=document.querySelector(i)?.content.cloneNode(!0),!s)){n.isRunning=!1,n._rcError="ID not found",f(e,"rc-error",{error:"ID not found",config:r});return}if(s){if(S(e,s),q(e,s.firstElementChild),r.swap==="inner")e.replaceChildren(s),f(e,"rc-inserted",r);else if(r.swap==="outer"){let d=s.firstChild;e.replaceWith(s),f(d,"rc-inserted",r)}}n._rcIsLoaded=!0,r.initialized=!0,r.isRunning=!1},u=[o.addScopeToNode(e,{_rc:{config:{...o.$rc.defaultConfig},trigger:l}}),o.addScopeToNode(e,o.reactive({_rcIsLoading:!1,_rcIsLoadingWithDelay:!1,_rcIsLoaded:!1,_rcError:null}))],r=o.$data(e)._rc.config;o.nextTick(()=>{r["process-slots-first"]&&e.querySelectorAll("[data-for-slot]").forEach(i=>{Array.from(i.content.children).forEach(n=>{o.initTree(n)})}),f(e,"rc-initialized",o.$data(e)._rc),r.trigger==="reactive"&&r.watch&&(a(r.watch)?l():o.$data(e).$watch(r.watch,i=>{i&&l()})),r.trigger==="load"&&l()}),c(()=>{u.forEach(s=>s())})}).before("show"),o.directive("rc",(e,{value:t,expression:a},{evaluate:c})=>{let l=s=>{let[i,n=0,m=0]=s.split(" ");return{trigger:i,requestDelay:parseInt(n),swapDelay:parseInt(m)}},u=a,r=o.$data(e)._rc.config;if(t===null){let s={...c(u)};if(s.trigger){let i=l(s.trigger);s=Object.assign(s,i)}r=Object.assign(r,p,s);return}if(t==="process-slots-first"&&(u=!0),t==="trigger"){let s=l(u);r=Object.assign(r,s);return}r[t]=u})}document.addEventListener("alpine:init",()=>{Alpine.plugin(D)});})();

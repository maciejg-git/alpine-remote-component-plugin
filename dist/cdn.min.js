(()=>{function q(i){let S=async e=>{try{let r=await fetch(e);if(!r.ok)throw r.status;return await r.text()}catch(r){throw r}},C=e=>new DOMParser().parseFromString(`<body><template>${e}</template></body>`,"text/html"),I=(...e)=>[...new Set(e.flatMap(r=>r.split(/\s+/)))].join(" "),h=e=>{let r=Array.from(e.querySelectorAll("[data-slot]"));return e.querySelectorAll("template").forEach(s=>{r.push(...h(s.content))}),r},L=(e,r)=>{for(let s of e.attributes){if(s.name==="_class"||s.name==="rc-class"){r.className=I(s.value,r.className);continue}s.name.startsWith("rc-")?r.setAttribute(s.name.substring(3),s.value):s.name.startsWith("_")&&r.setAttribute(s.name.substring(1),s.value)}},W=(e,r)=>{h(r).forEach(n=>{let u=e.querySelector(`template[data-for-slot='${n.dataset.slot}']`);u&&n.replaceWith(u.content.cloneNode(!0))})},d=(e,r,s={})=>{e.dispatchEvent(new CustomEvent(r,{detail:s,bubbles:!0,composed:!0,cancelable:!0}))},y=e=>new Promise(r=>setTimeout(r,e)),m=e=>e[0]==="/",w=e=>e[0]==="#",D={swap:"outer",trigger:"load",watch:null,name:"",isRunning:!1,initialized:!1,responseHTML:null,requestDelay:0,swapDelay:0,"process-slots-first":!1};i.$rc={config:{...D}},i.directive("remote-component",(e,{value:r,modifiers:s,expression:n},{evaluate:u,cleanup:p})=>{let c=async()=>{if(t.initialized||t.isRunning)return;t.isRunning=!0,d(e,"rc-before-load",t);let a=null,l=n,o=i.$data(e);!m(n)&&!w(n)&&(l=u(n)),t.requestDelay&&await y(t.requestDelay),o._rcIsLoading=!0,o._rcIsLoadingWithDelay=!0;let _;if(m(l)){let g;try{g=await S(l)}catch(b){o._rcError=b,o._rcIsLoading=!1,o._rcIsLoadingWithDelay=!1,t.isRunning=!1,d(e,"rc-error",{error:b,config:t});return}o._rcError=null,o._rcIsLoading=!1,t.responseHTML=g,d(e,"rc-loaded",t),_=C(g)}if(t.swapDelay&&await y(t.swapDelay),d(e,"rc-loaded-with-delay",t),o._rcIsLoadingWithDelay=!1,m(l)?a=_.querySelector("template")?.content:w(l)&&(a=document.querySelector(l)?.content.cloneNode(!0)),a){if(W(e,a),L(e,a.firstElementChild),t.swap==="inner")e.replaceChildren(a),d(e,"rc-inserted",t);else if(t.swap==="outer"){let g=a.firstChild;e.replaceWith(a),d(g,"rc-inserted",t)}}t.initialized=!0,t.isRunning=!1},f=[i.addScopeToNode(e,{_rc:{config:{...i.$rc.config},trigger:c}}),i.addScopeToNode(e,i.reactive({_rcIsLoading:!1,_rcIsLoadingWithDelay:!1,_rcError:null}))],t=i.$data(e)._rc.config;i.nextTick(()=>{t["process-slots-first"]&&e.querySelectorAll("[data-for-slot]").forEach(l=>{Array.from(l.content.children).forEach(o=>{i.initTree(o)})}),d(e,"rc-initialized",i.$data(e)._rc),t.trigger==="reactive"&&t.watch&&(u(t.watch)?c():i.$data(e).$watch(t.watch,l=>{l&&c()})),t.trigger==="load"&&c()}),p(()=>{f.forEach(a=>a())})}).before("on"),i.directive("rc",(e,{value:r,modifiers:s,expression:n},{evaluate:u})=>{let p=t=>{let[a,l=0,o=0]=t.split(" ");return[a,parseInt(l),parseInt(o)]},c=n,f=i.$data(e)._rc.config;if(r===null){let t={...u(c)};if(t.trigger){let a=p(t.trigger);t.trigger=a[0],t.requestDelay=a[1],t.swapDelay=a[2]}f=Object.assign(f,D,t);return}if(r==="process-slots-first"&&(c=!0),r==="trigger"){let t=p(c);f.trigger=t[0],f.requestDelay=t[1],f.swapDelay=t[2];return}f[r]=c})}document.addEventListener("alpine:init",()=>{Alpine.plugin(q)});})();

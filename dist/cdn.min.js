(()=>{function D(i){let _={swap:"outer",trigger:"load",watch:null,name:"",isRunning:!1,initialized:!1,responseHTML:null,requestDelay:0,swapDelay:0,"process-slots-first":!1,source:null,script:""},d={urlPrefix:"",componentPrefix:i.prefixed()},p=["trigger","swap","watch","name","process-slots-first","script"],L=async e=>{try{let t=await fetch(e);if(!t.ok)throw t.status;return await t.text()}catch(t){throw t}},I=e=>new DOMParser().parseFromString(`<body><template>${e}</template></body>`,"text/html"),q=(...e)=>[...new Set(e.flatMap(t=>t.split(/\s+/)))].join(" "),w=(e,t=0)=>{if(t>=10)return[];let a=Array.from(e.querySelectorAll("[data-slot]"));return e.querySelectorAll("template:not([id])").forEach(o=>{a.push(...w(o.content,t+1))}),a},S=(e,t)=>{for(let a of e.attributes){if(a.name==="_class"||a.name==="rc-class"){t.className=q(a.value,t.className);continue}a.name.startsWith("rc-")?t.setAttribute(a.name.substring(3),a.value):a.name.startsWith("_")&&t.setAttribute(a.name.substring(1),a.value)}},T=(e,t)=>{w(t).forEach(o=>{let f=(e.content??e).querySelector(`template[data-for-slot='${o.dataset.slot}']`);if(!f){o.replaceWith(...o.childNodes);return}o.replaceWith(f.content.cloneNode(!0))})},y=(e,t,a)=>{if(e.hasAttribute(t)){let o=e.getAttribute(t);e.removeAttribute(t),e.setAttribute(a,o)}},v=()=>{class e extends HTMLElement{connectedCallback(){y(this,"source","x-remote-component"),p.forEach(a=>{y(this,a,"data-rc-"+a)})}}customElements.define(d.componentPrefix+"component",e)},x=e=>{Array.isArray(e)&&e.forEach(t=>{if(!t.tag||!t.source)return;class a extends HTMLElement{connectedCallback(){this.setAttribute("x-remote-component",t.source),p.forEach(c=>{t[c]!==void 0&&this.setAttribute("data-rc-"+c,t[c]),y(this,c,"data-rc-"+c)})}}customElements.define(d.componentPrefix+t.tag,a)})},W=e=>{let[t,a=0,o=0]=e.trim().split(" ");return{trigger:t,requestDelay:parseInt(a),swapDelay:parseInt(o)}},u=(e,t,a={})=>{e.dispatchEvent(new CustomEvent(t,{detail:a,bubbles:!0,composed:!0,cancelable:!0}))},b=e=>new Promise(t=>setTimeout(t,e)),E=e=>e[0]==="/",C=e=>e[0]==="#";i.$rc={defaultConfig:_,globalConfig:d,makeCustomElementComponents:x},v(),i.directive("remote-component",(e,{expression:t},{evaluate:a,cleanup:o})=>{let c=(s,l)=>{l._rcError=s,u(e,"rc-error",{error:s,config:r})},f=async()=>{if(r.initialized||r.isRunning||!t)return;r.isRunning=!0,u(e,"rc-before-load",r);let s=null,l=t,n=i.$data(e);!E(t)&&!C(t)&&(l=a(t)),r.source=l,r.requestDelay&&await b(r.requestDelay),n._rcIsLoading=!0,n._rcIsLoadingWithDelay=!0;let h;if(E(l)){let m;try{[m,h]=await Promise.all([L(d.urlPrefix+l),r.script&&import(d.urlPrefix+r.script)]),r.responseHTML=m,s=I(m).querySelector("template")?.content}catch(g){c(g,n),n._rcIsLoading=!1,n._rcIsLoadingWithDelay=!1,r.isRunning=!1;return}}else if(C(l)&&(s=document.querySelector(l)?.content.cloneNode(!0),!s)){c("ID not found",n),n._rcIsLoading=!1,n._rcIsLoadingWithDelay=!1,r.isRunning=!1;return}if(u(e,"rc-loaded",r),n._rcError=null,n._rcIsLoading=!1,r.swapDelay&&await b(r.swapDelay),u(e,"rc-loaded-with-delay",r),n._rcIsLoadingWithDelay=!1,s){if(T(e,s),S(e,s.firstElementChild),h&&h.default&&i.plugin(h.default),u(e,"rc-before-insert",r),r.swap==="inner")i.mutateDom(()=>{e.replaceChildren(s)}),u(e,"rc-inserted",r),i.initTree(e);else if(r.swap==="outer"){let m=s.firstElementChild,g=[...s.children];i.mutateDom(()=>{i.destroyTree(e),e.replaceWith(s)}),u(m,"rc-inserted",r),g.forEach(R=>{i.initTree(R)})}}n._rcIsLoaded=!0,r.initialized=!0,r.isRunning=!1},P=[i.addScopeToNode(e,{_rc:{config:{...i.$rc.defaultConfig},trigger:f}}),i.addScopeToNode(e,i.reactive({_rcIsLoading:!1,_rcIsLoadingWithDelay:!1,_rcIsLoaded:!1,_rcError:null}))];o(()=>{P.forEach(s=>s())});let r=i.$data(e)._rc.config;p.forEach(s=>{let l=e.getAttribute("data-rc-"+s);if(l!==null){if(s==="trigger"){let n=W(l);Object.assign(r,n);return}s==="process-slots-first"&&(l=!0),r[s]=l}}),r["process-slots-first"]&&e.querySelectorAll("[data-for-slot]").forEach(l=>{Array.from(l.content.children).forEach(n=>{i.initTree(n)})}),u(e,"rc-initialized",i.$data(e)._rc),r.trigger==="reactive"&&r.watch&&(a(r.watch)?f():i.$data(e).$watch(r.watch,l=>{l&&f()})),r.trigger==="load"&&f()}).before("show")}document.addEventListener("alpine:init",()=>{Alpine.plugin(D)});})();

(()=>{function S(i){let q=async e=>{try{let r=await fetch(e);if(!r.ok)throw r.status;return await r.text()}catch(r){throw r}},C=e=>new DOMParser().parseFromString(`<body><template>${e}</template></body>`,"text/html"),I=(...e)=>[...new Set(e.flatMap(r=>r.split(/\s+/)))].join(" "),h=e=>{let r=Array.from(e.querySelectorAll("[data-slot]"));return e.querySelectorAll("template").forEach(s=>{r.push(...h(s.content))}),r},L=(e,r)=>{for(let s of e.attributes){if(s.name==="_class"||s.name==="rc-class"){r.className=I(s.value,r.className);continue}s.name.startsWith("rc-")?r.setAttribute(s.name.substring(3),s.value):s.name.startsWith("_")&&r.setAttribute(s.name.substring(1),s.value)}},W=(e,r)=>{h(r).forEach(l=>{let u=(e.content??e).querySelector(`template[data-for-slot='${l.dataset.slot}']`);if(!u){l.replaceWith(...l.childNodes);return}l.replaceWith(u.content.cloneNode(!0))})},f=(e,r,s={})=>{e.dispatchEvent(new CustomEvent(r,{detail:s,bubbles:!0,composed:!0,cancelable:!0}))},y=e=>new Promise(r=>setTimeout(r,e)),p=e=>e[0]==="/",w=e=>e[0]==="#",D={swap:"outer",trigger:"load",watch:null,name:"",isRunning:!1,initialized:!1,responseHTML:null,requestDelay:0,swapDelay:0,"process-slots-first":!1,urlPrefix:"",componentSource:null};i.$rc={defaultConfig:{...D}},i.directive("remote-component",(e,{value:r,modifiers:s,expression:l},{evaluate:g,cleanup:u})=>{let c=async()=>{if(t.initialized||t.isRunning)return;t.isRunning=!0,f(e,"rc-before-load",t);let a=null,o=l,n=i.$data(e);!p(l)&&!w(l)&&(o=g(l)),t.componentSource=o,t.requestDelay&&await y(t.requestDelay),n._rcIsLoading=!0,n._rcIsLoadingWithDelay=!0;let _;if(p(o)){let m;try{m=await q(t.urlPrefix+o)}catch(b){n._rcError=b,n._rcIsLoading=!1,n._rcIsLoadingWithDelay=!1,t.isRunning=!1,f(e,"rc-error",{error:b,config:t});return}n._rcError=null,n._rcIsLoading=!1,t.responseHTML=m,f(e,"rc-loaded",t),_=C(m)}if(t.swapDelay&&await y(t.swapDelay),f(e,"rc-loaded-with-delay",t),n._rcIsLoadingWithDelay=!1,p(o))a=_.querySelector("template")?.content;else if(w(o)&&(a=document.querySelector(o)?.content.cloneNode(!0),!a)){n.isRunning=!1,n._rcError="ID not found",f(e,"rc-error",{error:"ID not found",config:t});return}if(a){if(W(e,a),L(e,a.firstElementChild),t.swap==="inner")e.replaceChildren(a),f(e,"rc-inserted",t);else if(t.swap==="outer"){let m=a.firstChild;e.replaceWith(a),f(m,"rc-inserted",t)}}t.initialized=!0,t.isRunning=!1},d=[i.addScopeToNode(e,{_rc:{config:{...i.$rc.defaultConfig},trigger:c}}),i.addScopeToNode(e,i.reactive({_rcIsLoading:!1,_rcIsLoadingWithDelay:!1,_rcError:null}))],t=i.$data(e)._rc.config;r&&(t.name=r),i.nextTick(()=>{t["process-slots-first"]&&e.querySelectorAll("[data-for-slot]").forEach(o=>{Array.from(o.content.children).forEach(n=>{i.initTree(n)})}),f(e,"rc-initialized",i.$data(e)._rc),t.trigger==="reactive"&&t.watch&&(g(t.watch)?c():i.$data(e).$watch(t.watch,o=>{o&&c()})),t.trigger==="load"&&c()}),u(()=>{d.forEach(a=>a())})}).before("on"),i.directive("rc",(e,{value:r,modifiers:s,expression:l},{evaluate:g})=>{let u=t=>{let[a,o=0,n=0]=t.split(" ");return{trigger:a,requestDelay:parseInt(o),swapDelay:parseInt(n)}},c=l,d=i.$data(e)._rc.config;if(r===null){let t={...g(c)};if(t.trigger){let a=u(t.trigger);t=Object.assign(t,a)}d=Object.assign(d,D,t);return}if(r==="process-slots-first"&&(c=!0),r==="trigger"){let t=u(c);d=Object.assign(d,t);return}d[r]=c})}document.addEventListener("alpine:init",()=>{Alpine.plugin(S)});})();

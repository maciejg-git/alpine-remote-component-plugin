(()=>{function v(i){let S={swap:"outer",trigger:"load",watch:null,name:"",isRunning:!1,initialized:!1,responseHTML:null,requestDelay:0,swapDelay:0,rawSource:null,source:null,script:""},f={urlPrefix:"",componentPrefix:i.prefixed()},w=["trigger","swap","watch","name","script"],L=["load","event","reactive","intersect","custom"],I=["inner","outer","target"],T=async e=>{try{let t=await fetch(e);if(!t.ok)throw t.status;return await t.text()}catch(t){throw t}},q=e=>new DOMParser().parseFromString(`<body><template>${e}</template></body>`,"text/html"),x=(...e)=>[...new Set(e.flatMap(t=>t.split(/\s+/)))].join(" "),b=(e,t=0)=>{if(t>=10)return[];let a=Array.from(e.querySelectorAll("[data-slot]"));return e.querySelectorAll("template:not([id])").forEach(l=>{a.push(...b(l.content,t+1))}),a},P=(e,t)=>{for(let a of e.attributes){if(a.name==="_class"||a.name==="rc-class"){t.className=x(a.value,t.className);continue}a.name.startsWith("rc-")?t.setAttribute(a.name.substring(3),a.value):a.name.startsWith("_")&&t.setAttribute(a.name.substring(1),a.value)}},W=(e,t)=>{for(let a in t.dataset)e.dataset[a]&&(t.dataset[a]=e.dataset[a])},R=(e,t)=>{b(t).forEach(l=>{let m=(e.content??e).querySelector(`template[data-for-slot='${l.dataset.slot}']`);if(!m){l.replaceWith(...l.childNodes);return}l.replaceWith(m.content.cloneNode(!0))})},y=(e,t,a)=>{if(e.hasAttribute(t)){let l=e.getAttribute(t);e.removeAttribute(t),e.setAttribute(a,l)}},$=()=>{class e extends HTMLElement{connectedCallback(){y(this,"source","x-remote-component"),w.forEach(a=>{y(this,a,"data-rc-"+a)})}}customElements.define(f.componentPrefix+"component",e)},C=e=>{Array.isArray(e)&&e.forEach(t=>{if(!t.tag||!t.source)return;class a extends HTMLElement{connectedCallback(){this.setAttribute("x-remote-component",t.source),w.forEach(u=>{t[u]!==void 0&&this.setAttribute("data-rc-"+u,t[u]),y(this,u,"data-rc-"+u)})}}customElements.define(f.componentPrefix+t.tag,a),t.components&&C(t.components)})},H=e=>{let[t,a=0,l=0]=e.trim().split(" ");return{trigger:t,requestDelay:parseInt(a),swapDelay:parseInt(l)}},c=(e,t,a={})=>{e.dispatchEvent(new CustomEvent(t,{detail:a,bubbles:!0,composed:!0,cancelable:!0}))},D=e=>new Promise(t=>setTimeout(t,e)),E=e=>e[0]==="/",_=e=>e[0]==="#";i.$rc={defaultConfig:S,globalConfig:f,makeCustomElementComponents:C},$(),i.directive("remote-component",(e,{expression:t},{evaluate:a,cleanup:l})=>{let u=(s,n)=>{n._rcError=s,n._rcIsLoading=!1,n._rcIsLoadingWithDelay=!1,r.isRunning=!1,c(e,"rc-error",{error:s,config:r})},m=(s={})=>{c(e,"rc-completed",{config:r,...s})},g=async()=>{if(r.initialized||r.isRunning||!t)return;r.isRunning=!0,c(e,"rc-before-load",r);let s=null,n=t,o=i.$data(e),h;if(!E(t)&&!_(t)&&(n=a(t)),r.source=n,r.requestDelay&&await D(r.requestDelay),o._rcIsLoading=!0,o._rcIsLoadingWithDelay=!0,E(n)){let d;try{[d,h]=await Promise.all([T(f.urlPrefix+n),r.script&&import(f.urlPrefix+r.script)]),r.responseHTML=d,s=q(d).querySelector("template")?.content}catch(p){u(p,o);return}}else if(_(n)&&(s=document.querySelector(n)?.content.cloneNode(!0),!s)){u("ID not found",o);return}if(c(e,"rc-loaded",r),o._rcError=null,o._rcIsLoading=!1,r.swapDelay&&await D(r.swapDelay),c(e,"rc-loaded-with-delay",r),o._rcIsLoadingWithDelay=!1,s){if(R(e,s),P(e,s.firstElementChild),W(e,s.firstElementChild),h&&h.default&&i.plugin(h.default),c(e,"rc-before-insert",r),r.swap==="inner")i.mutateDom(()=>{e.replaceChildren(s)}),c(e,"rc-inserted",r),i.initTree(e);else if(r.swap==="outer"){let d=s.firstElementChild,p=[...s.children];i.mutateDom(()=>{i.destroyTree(e),e.replaceWith(s)}),c(d,"rc-inserted",r),p.forEach(M=>{i.initTree(M)})}else if(r.swap==="target"){let d=e.querySelector("[data-target]");d&&(i.mutateDom(()=>{d.replaceChildren(s)}),i.initTree(d))}}o._rcIsLoaded=!0,r.initialized=!0,r.isRunning=!1},N=[i.addScopeToNode(e,{_rc:{config:{...i.$rc.defaultConfig},trigger:g,complete:m}}),i.addScopeToNode(e,i.reactive({_rcIsLoading:!1,_rcIsLoadingWithDelay:!1,_rcIsLoaded:!1,_rcError:null}))];l(()=>{N.forEach(s=>s())});let r=i.$data(e)._rc.config;r.rawSource=t,w.forEach(s=>{let n=e.getAttribute("data-rc-"+s);if(n!==null){if(s==="trigger"){let o=H(n);L.includes(o.trigger)&&Object.assign(r,o);return}if(s==="swap"&&!I.includes(n))return;r[s]=n}}),c(e,"rc-initialized",i.$data(e)._rc),r.trigger==="reactive"&&r.watch&&(a(r.watch)?g():i.$data(e).$watch(r.watch,n=>{n&&g()})),r.trigger==="load"&&g()}).before("show"),i.magic("rcRoot",e=>e.closest("[x-remote-component]"))}document.addEventListener("alpine:init",()=>{Alpine.plugin(v)});})();

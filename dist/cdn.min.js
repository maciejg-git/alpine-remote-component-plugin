(()=>{function b(l){let q=async e=>{try{let r=await fetch(e);if(!r.ok)throw r.status;return await r.text()}catch(r){throw r}},S=e=>new DOMParser().parseFromString(`<body><template>${e}</template></body>`,"text/html"),C=(...e)=>[...new Set(e.flatMap(r=>r.split(/\s+/)))].join(" "),h=e=>{let r=Array.from(e.querySelectorAll("[data-slot]"));return e.querySelectorAll("template").forEach(s=>{r.push(...h(s.content))}),r},I=(e,r)=>{for(let s of e.attributes){if(s.name==="_class"||s.name==="rc-class"){r.className=C(s.value,r.className);continue}s.name.startsWith("rc-")?r.setAttribute(s.name.substring(3),s.value):s.name.startsWith("_")&&r.setAttribute(s.name.substring(1),s.value)}},L=(e,r)=>{h(r).forEach(o=>{let d=e.querySelector(`template[data-for-slot='${o.dataset.slot}']`);d&&o.replaceWith(d.content.cloneNode(!0))})},f=(e,r,s={})=>{e.dispatchEvent(new CustomEvent(r,{detail:s,bubbles:!0,composed:!0,cancelable:!0}))},y=e=>new Promise(r=>setTimeout(r,e)),m=e=>e[0]==="/",w=e=>e[0]==="#",D={swap:"outer",trigger:"load",watch:null,name:"",isRunning:!1,initialized:!1,responseHTML:null,requestDelay:0,swapDelay:0,"process-templates-first":!1};l.directive("remote-component",(e,{value:r,modifiers:s,expression:o},{evaluate:d,cleanup:g})=>{let c=async()=>{if(t.initialized)return;t.isRunning=!0,f(e,"rc-before-load",t);let a=null,i=o,n=l.$data(e);!m(o)&&!w(o)&&(i=d(o)),t.requestDelay&&await y(t.requestDelay),n._rcIsLoading=!0,n._rcIsLoadingWithDelay=!0;let p;if(m(i)){let u;try{u=await q(i)}catch(_){n._rcError=_,n._rcIsLoading=!1,n._rcIsLoadingWithDelay=!1,t.isRunning=!1,f(e,"rc-error",{error:_,config:t});return}n._rcError=null,n._rcIsLoading=!1,t.responseHTML=u,f(e,"rc-loaded",t),p=S(u)}if(t.swapDelay&&await y(t.swapDelay),f(e,"rc-loaded-with-delay",t),n._rcIsLoadingWithDelay=!1,m(i)?a=p.querySelector("template")?.content:w(i)&&(a=document.querySelector(i)?.content.cloneNode(!0)),a){if(L(e,a),I(e,a.firstElementChild),t.swap==="inner")e.replaceChildren(a),f(e,"rc-inserted",t);else if(t.swap==="outer"){let u=a.firstChild;e.replaceWith(a),f(u,"rc-inserted",t)}}t.initialized=!0,t.isRunning=!1};l.addScopeToNode(e,{_rc:{config:{...D},trigger:c}}),l.addScopeToNode(e,l.reactive({_rcIsLoading:!1,_rcIsLoadingWithDelay:!1,_rcError:null}));let t=l.$data(e)._rc.config;l.nextTick(()=>{t["process-templates-first"]&&e.querySelectorAll("[data-for-slot]").forEach(i=>{l.initTree(i.content.firstElementChild)}),f(e,"rc-initialized",l.$data(e)._rc),t.trigger==="reactive"&&t.watch&&(d(t.watch)?c():l.$data(e).$watch(t.watch,i=>{i&&c()})),t.trigger==="load"&&c()}),g(()=>{})}).before("on"),l.directive("rc",(e,{value:r,modifiers:s,expression:o},{evaluate:d})=>{let g=a=>{let[i,n=0,p=0]=a.split(" ");return[i,parseInt(n),parseInt(p)]},c=o,t=l.$data(e)._rc.config;if(r===null){let a={...d(c)};if(a.trigger){let i=g(a.trigger);a.trigger=i[0],a.requestDelay=i[1],a.swapDelay=i[2]}t=Object.assign(t,D,a);return}if(r==="process-templates-first"&&(c=!0),r==="trigger"){let a=g(c);t.trigger=a[0],t.requestDelay=a[1],t.swapDelay=a[2];return}t[r]=c})}document.addEventListener("alpine:init",()=>{Alpine.plugin(b)});})();

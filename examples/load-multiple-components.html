<div
  x-data="{
    isLoaded: false,
    components: [],
    handleInserted() {
      this.components = this.components.filter((c) => {
        return c !== this.$event.detail.name
      })
      this.$nextTick(() => {
        this.isLoaded = !this.components.length
      })
    },
    handleInitialized() {
      if (!this.$event.detail.config.name) return
      this.components.push(this.$event.detail.config.name)
    }
  }"
  @rc-inserted="handleInserted"
  @rc-initialized="handleInitialized"
>
  <div x-show="!isLoaded">
    <div x-remote-component="#placeholder"></div>
  </div>
  <div x-show="isLoaded">
    <div
      x-remote-component="/examples/components/component-a.html"
      data-rc-name="component-a"
    >
      <template data-for-slot="content">
        <div
          x-remote-component="/examples/components/component-b.html"
          data-rc-name="component-b"
        >
          <template data-for-slot="content">
            <div
              x-remote-component="/examples/components/component-c.html"
              data-rc-name="component-c"
            ></div>
          </template>
        </div>
      </template>
    </div>
    <div
      x-remote-component="/examples/components/component-b.html"
      data-rc-name="component-b-outer"
    ></div>
    <div
      x-remote-component="/examples/components/component-c.html"
      data-rc-name="component-c-outer"
    ></div>
  </div>
</div>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title></title>
    <!-- font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <link href="/output.css" rel="stylesheet" />
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/styles/default.min.css"> -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/styles/atom-one-light.min.css">
    <!-- highlight.js -->
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/languages/html.min.js"></script>
    <!-- marked -->
    <script src="https://cdn.jsdelivr.net/npm/marked/lib/marked.umd.js"></script>
    <!-- alpine remote component plugin -->
    <script defer src="/dist/cdn.js"></script>
    <!-- alpine -->
    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/intersect@3.x.x/dist/cdn.min.js"></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
  </head>
  <body>
    <nav class="border-b border-gray-200 p-2 sticky top-0 bg-white">
      <span class="font-semibold text-lg">
        Alpine Remote Component
      </span>
    </nav>

    <div x-data>
      <div class="mx-auto flex max-w-4xl flex-col gap-y-12 mt-10 mb-20 text-gray-800">
        <div x-remote-component="#example">
          <template data-template="title"> Basic ID component </template>
          <template data-template="text">
            <p class="markdown">Use an ID starting with `#` to load the ID component.</p>
          </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/basic-id-component.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> Basic URL component </template>
          <template data-template="text">
            <p class="markdown">Use a path starting with `/` to load the URL component.</p>
          </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/basic-url-component.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> Basic dynamic component </template>
          <template data-template="text">
            <p class="markdown">Values that are not ID or path are evaluated by Alpine before loading the component. The result of the evaluation should be and ID or path.</p>
          </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/basic-dynamic-component.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> Trigger - Load </template>
          <template data-template="text">
            <p class="markdown">The load trigger loads the component immediately.</p>
          </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/trigger-load.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> Trigger - Event </template>
          <template data-template="text">
            <p class="markdown">The event trigger loads the component on a specified event. You should add the listener separately using the `x-on` directive.</p>
          </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/trigger-event.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> Trigger - Reactive </template>
          <template data-template="text">
            <p class="markdown">The reactive trigger loads the component based on a reactive property value. Use the `x-rc:watch` directive to define watched property. You can also set up your own watcher.</p>
            <p class="markdown">Components can also be loaded and removed based on reactive property using the `x-if` directive.</p>
          </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/trigger-reactive.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> Trigger - Intersect </template>
          <template data-template="text">
            <p class="markdown">The intersect trigger loads component when it enters the viewport. This trigger uses Alpine intersect plugin.</p>
          </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/trigger-intersect.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> Trigger - Custom </template>
          <template data-template="text">
            <p class="markdown">Use the custom trigger to load the component by calling the `_rc.trigger()` function.</p>
          </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/trigger-custom.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> Trigger delay </template>
          <template data-template="text">
            <p class="markdown">The trigger allows two optional parameters:</p>
            <ul class="list-disc list-inside">
              <li>delay (ms) before sending the request.</li>
              <li>delay (ms) before inserting the component into the DOM.</li>
            </ul>
          </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/trigger-delay.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> Loading indicator </template>
          <template data-template="text">
            <p class="markdown">The `x-remote-component` element can contain any content that will be visible until it is replaced with the component. You can use it for placeholders, indicators, progress bars etc. To display it conditionally while the component is loading use the `x-show` directive and the `_rcIsLoading` or `_rcIsLoadingWithDelay` properties.</p>
            <p class="markdown">The second example uses indicator component for better reusability.</p>
          </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/indicator.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> Swap - Inner </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/swap-inner.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> Swap - Outer </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/swap-outer.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> Events </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/events.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> x-if </template>
          <template data-template="text">
            <p class="markdown">The `x-if` directive requires a single root element so you need to use the inner swap option or wrap the component with an additional element.</p>
          </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/x-if.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> x-for </template>
          <template data-template="text">
            <p class="markdown">The `x-for` directive requires a single root element so you need to use the inner swap option or wrap the component with an additional element.</p>
          </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/x-for.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> Basic data-template </template>
          <template data-template="text">
            <p class="markdown">The contents of template elements marked with the `data-template` attribute are replaced with the corresponding elements in the component. This provides functionality similar to slots and enhances the reusability of components. The replaced content can be static or contain other components.</p>
          </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/basic-data-template.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> data-template components </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/data-template-components.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> data-template nested components </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/data-template-nested-components.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> Component attributes </template>
          <template data-template="text">
            <p class="markdown">Attributes prefixed with `_` or `rc-` are transferred to the component's root element. Classes are an exception and are merged with the existing classes.</p>
          </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/copy-attributes.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> Router view </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/router-view.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> Dynamic component options </template>
          <template data-template="text">
            <p class="markdown">For dynamic component options, use the `x-rc` directive without a property and provide an object as the value.</p>
          </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/rc.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> Recursive components </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/recursive.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>

        <div x-remote-component="#example">
          <template data-template="title"> Handling errors </template>
          <template data-template="example">
            <div
              x-remote-component="/examples/errors.html"
              x-rc:name="example"
            ></div>
          </template>
        </div>
      </div>
    </div>

    <template id="example">
      <div
        x-data="{
          html: '',
          handleComponentInserted() {
            if (this.$event.detail.name === 'example') {
              this.html = this.$event.detail.responseHTML
              this.$nextTick(() => {
                hljs.highlightElement(this.$refs.code)
                let md = this.$el.querySelectorAll('.markdown')
                md.forEach((el) => {
                  el.innerHTML = marked.parse(el.textContent)
                })
              })
            }
          }
        }"
        @rc-inserted="handleComponentInserted"
      >
        <div class="flex flex-col gap-y-6">
          <div class="text-xl font-semibold">
            <div data-template="title"></div>
          </div>

          <div class="flex flex-col gap-y-4">
            <div data-template="text"></div>
          </div>

          <pre class="rounded-xl overflow-hidden text-sm"><code x-text="html" x-ref="code">
          </code></pre>

          <div class="flex flex-col gap-y-4 items-center">
            <div data-template="example"></div>
          </div>
        </div>
      </div>
    </template>
  </body>
</html>

(()=>{function _(l){let L={swap:"outer",trigger:"load",name:"",isRunning:!1,initialized:!1,responseHTML:null,requestDelay:0,swapDelay:0,rawSource:null,source:null,script:"",tags:{}},f={urlPrefix:"",fetchOptions:null,componentPrefix:l.prefixed()},h=["trigger","swap","name","script","tags"],S=["load","event","reactive","intersect","custom"],T=["inner","outer","target"],q=async e=>{try{let t=await fetch(e,f.fetchOptions||{});if(!t.ok)throw t.status;return await t.text()}catch(t){throw t}},v=e=>new DOMParser().parseFromString(`<body><template>${e}</template></body>`,"text/html"),I=(e,t)=>{let a=e.split(" ");t.classList.add(...a)},P=e=>{let t=e.split("."),a=document.querySelector(t.shift());if(!a)return null;for(let i of t)if(a=a.content.querySelector("#"+i),!a)return null;return a},b=e=>{let t=Array.from(e.querySelectorAll("[data-slot]"));return e.querySelectorAll("template:not([id])").forEach(a=>{t.push(...b(a.content))}),t},x=(e,t)=>{for(let a of e.attributes){let{name:i,value:o}=a;if(i==="_class"||i==="prop:class"){I(o,t);continue}i.startsWith("prop:")?t.setAttribute(i.substring(5),o):i.startsWith("_")&&t.setAttribute(i.substring(1),o)}},W=(e,t)=>{let a=b(t);a.length&&a.forEach(i=>{let m=(e.content??e).querySelector(`template[data-for-slot='${i.dataset.slot}']`);if(!m){i.replaceWith(...i.childNodes);return}i.replaceWith(m.content.cloneNode(!0))})},y=(e,t,a)=>{if(e.hasAttribute(t)){let i=e.getAttribute(t);e.removeAttribute(t),e.setAttribute(a,i)}},R=()=>{class e extends HTMLElement{connectedCallback(){y(this,"source","x-remote-component"),h.forEach(a=>{y(this,a,"data-rc-"+a)})}}customElements.define(f.componentPrefix+"component",e)},w=e=>{Array.isArray(e)&&e.forEach(t=>{if(!t.tag||!t.source)return;class a extends HTMLElement{connectedCallback(){this.setAttribute("x-remote-component",t.source),h.forEach(o=>{t[o]!==void 0&&this.setAttribute("data-rc-"+o,t[o]),y(this,o,"data-rc-"+o)})}}customElements.define(f.componentPrefix+t.tag,a),t.components&&w(t.components)})},H=e=>{let[t,a=0,i=0]=e.trim().split(" ");return{trigger:t,requestDelay:parseInt(a),swapDelay:parseInt(i)}},d=(e,t,a={})=>{e.dispatchEvent(new CustomEvent(t,{detail:a,bubbles:!0,composed:!0,cancelable:!0}))},E=e=>new Promise(t=>setTimeout(t,e)),C=e=>e[0]==="/",D=e=>e[0]==="#";l.$rc={defaultConfig:L,globalConfig:f,makeCustomElementComponents:w},R(),l.directive("remote-component",(e,{expression:t},{evaluate:a,cleanup:i})=>{let o=(s,n)=>{n._rcError=s,n._rcIsLoading=!1,n._rcIsLoadingWithDelay=!1,r.isRunning=!1,d(e,"rc-error",{error:s,config:r})},m=async()=>{if(r.initialized||r.isRunning||!t)return;r.isRunning=!0,d(e,"rc-before-load",r);let s=null,n=t,c=l.$data(e),g;if(!C(t)&&!D(t)&&(n=a(t)),r.source=n,r.requestDelay&&await E(r.requestDelay),c._rcIsLoading=!0,c._rcIsLoadingWithDelay=!0,C(n)){let u;try{[u,g]=await Promise.all([q(f.urlPrefix+n),r.script&&import(f.urlPrefix+r.script)]),r.responseHTML=u,s=v(u).querySelector("template")?.content}catch(p){o(p,c);return}}else if(D(n)&&(s=P(n),s=s?.content.cloneNode(!0),!s)){o("ID not found",c);return}if(d(e,"rc-loaded",r),c._rcError=null,c._rcIsLoading=!1,r.swapDelay&&await E(r.swapDelay),d(e,"rc-loaded-with-delay",r),c._rcIsLoadingWithDelay=!1,s){if(W(e,s),x(e,s.firstElementChild),g&&g.default&&l.plugin(g.default),d(e,"rc-before-insert",r),r.swap==="inner")l.mutateDom(()=>{e.replaceChildren(s)}),d(e,"rc-inserted",r),l.initTree(e);else if(r.swap==="outer"){let u=s.firstElementChild,p=[...s.children];l.mutateDom(()=>{l.destroyTree(e),e.replaceWith(s)}),d(u,"rc-inserted",r),p.forEach($=>{l.initTree($)})}else if(r.swap==="target"){let u=e.querySelector("[data-target]");u&&(l.mutateDom(()=>{u.replaceChildren(s)}),l.initTree(u))}}c._rcIsLoaded=!0,r.initialized=!0,r.isRunning=!1},r={...l.$rc.defaultConfig},O=[l.addScopeToNode(e,{_rc:{config:r,trigger:m,triggerEffect(...s){s.every(Boolean)&&m()}}}),l.addScopeToNode(e,l.reactive({_rcIsLoading:!1,_rcIsLoadingWithDelay:!1,_rcIsLoaded:!1,_rcError:null}))];i(()=>{O.forEach(s=>s())}),r.rawSource=t,h.forEach(s=>{let n=e.getAttribute("data-rc-"+s);if(n!==null){if(s==="trigger"){let c=H(n);S.includes(c.trigger)&&Object.assign(r,c);return}if(s==="swap"&&!T.includes(n))return;if(s==="tags"){r.tags=Object.fromEntries(n.split(" ").map(c=>[c,!0]));return}r[s]=n}}),d(e,"rc-initialized",l.$data(e)._rc),r.trigger==="load"&&m()}).before("show"),l.magic("rcRoot",e=>e.closest("[x-remote-component]"))}document.addEventListener("alpine:init",()=>{Alpine.plugin(_)});})();

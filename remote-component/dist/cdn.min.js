(()=>{function v(i){let _={swap:"outer",trigger:"load",name:"",isRunning:!1,initialized:!1,responseHTML:null,requestDelay:0,swapDelay:0,rawSource:null,source:null,script:""},m={urlPrefix:"",componentPrefix:i.prefixed()},h=["trigger","swap","name","script"],S=["load","event","reactive","intersect","custom"],L=["inner","outer","target"],I=async e=>{try{let t=await fetch(e);if(!t.ok)throw t.status;return await t.text()}catch(t){throw t}},T=e=>new DOMParser().parseFromString(`<body><template>${e}</template></body>`,"text/html"),q=(...e)=>[...new Set(e.flatMap(t=>t.split(/\s+/)))].join(" "),b=e=>{let t=Array.from(e.querySelectorAll("[data-slot]"));return e.querySelectorAll("template:not([id])").forEach(r=>{t.push(...b(r.content))}),t},x=(e,t)=>{for(let r of e.attributes){if(r.name==="_class"||r.name==="rc:class"){t.className=q(r.value,t.className);continue}r.name.startsWith("rc:")?t.setAttribute(r.name.substring(3),r.value):r.name.startsWith("_")&&t.setAttribute(r.name.substring(1),r.value)}},P=(e,t)=>{for(let r in t.dataset)e.dataset[r]&&(t.dataset[r]=e.dataset[r])},W=(e,t)=>{let r=b(t);r.length&&r.forEach(l=>{let f=(e.content??e).querySelector(`template[data-for-slot='${l.dataset.slot}']`);if(!f){l.replaceWith(...l.childNodes);return}l.replaceWith(f.content.cloneNode(!0))})},y=(e,t,r)=>{if(e.hasAttribute(t)){let l=e.getAttribute(t);e.removeAttribute(t),e.setAttribute(r,l)}},R=()=>{class e extends HTMLElement{connectedCallback(){y(this,"source","x-remote-component"),h.forEach(r=>{y(this,r,"data-rc-"+r)})}}customElements.define(m.componentPrefix+"component",e)},w=e=>{Array.isArray(e)&&e.forEach(t=>{if(!t.tag||!t.source)return;class r extends HTMLElement{connectedCallback(){this.setAttribute("x-remote-component",t.source),h.forEach(c=>{t[c]!==void 0&&this.setAttribute("data-rc-"+c,t[c]),y(this,c,"data-rc-"+c)})}}customElements.define(m.componentPrefix+t.tag,r),t.components&&w(t.components)})},H=e=>{let[t,r=0,l=0]=e.trim().split(" ");return{trigger:t,requestDelay:parseInt(r),swapDelay:parseInt(l)}},d=(e,t,r={})=>{e.dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,composed:!0,cancelable:!0}))},C=e=>new Promise(t=>setTimeout(t,e)),D=e=>e[0]==="/",E=e=>e[0]==="#";i.$rc={defaultConfig:_,globalConfig:m,makeCustomElementComponents:w},R(),i.directive("remote-component",(e,{expression:t},{evaluate:r,cleanup:l})=>{let c=(s,n)=>{n._rcError=s,n._rcIsLoading=!1,n._rcIsLoadingWithDelay=!1,a.isRunning=!1,d(e,"rc-error",{error:s,config:a})},f=async()=>{if(a.initialized||a.isRunning||!t)return;a.isRunning=!0,d(e,"rc-before-load",a);let s=null,n=t,o=i.$data(e),g;if(!D(t)&&!E(t)&&(n=r(t)),a.source=n,a.requestDelay&&await C(a.requestDelay),o._rcIsLoading=!0,o._rcIsLoadingWithDelay=!0,D(n)){let u;try{[u,g]=await Promise.all([I(m.urlPrefix+n),a.script&&import(m.urlPrefix+a.script)]),a.responseHTML=u,s=T(u).querySelector("template")?.content}catch(p){c(p,o);return}}else if(E(n)&&(s=document.querySelector(n)?.content.cloneNode(!0),!s)){c("ID not found",o);return}if(d(e,"rc-loaded",a),o._rcError=null,o._rcIsLoading=!1,a.swapDelay&&await C(a.swapDelay),d(e,"rc-loaded-with-delay",a),o._rcIsLoadingWithDelay=!1,s){if(W(e,s),x(e,s.firstElementChild),P(e,s.firstElementChild),g&&g.default&&i.plugin(g.default),d(e,"rc-before-insert",a),a.swap==="inner")i.mutateDom(()=>{e.replaceChildren(s)}),d(e,"rc-inserted",a),i.initTree(e);else if(a.swap==="outer"){let u=s.firstElementChild,p=[...s.children];i.mutateDom(()=>{i.destroyTree(e),e.replaceWith(s)}),d(u,"rc-inserted",a),p.forEach(M=>{i.initTree(M)})}else if(a.swap==="target"){let u=e.querySelector("[data-target]");u&&(i.mutateDom(()=>{u.replaceChildren(s)}),i.initTree(u))}}o._rcIsLoaded=!0,a.initialized=!0,a.isRunning=!1},a={...i.$rc.defaultConfig},N=[i.addScopeToNode(e,{_rc:{config:a,trigger:f,triggerEffect(...s){s.every(Boolean)&&f()}}}),i.addScopeToNode(e,i.reactive({_rcIsLoading:!1,_rcIsLoadingWithDelay:!1,_rcIsLoaded:!1,_rcError:null}))];l(()=>{N.forEach(s=>s())}),a.rawSource=t,h.forEach(s=>{let n=e.getAttribute("data-rc-"+s);if(n!==null){if(s==="trigger"){let o=H(n);S.includes(o.trigger)&&Object.assign(a,o);return}if(s==="swap"&&!L.includes(n))return;a[s]=n}}),d(e,"rc-initialized",i.$data(e)._rc),a.trigger==="load"&&f()}).before("show"),i.magic("rcRoot",e=>e.closest("[x-remote-component]"))}document.addEventListener("alpine:init",()=>{Alpine.plugin(v)});})();

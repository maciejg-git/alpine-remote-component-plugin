(()=>{function _(i){let L={swap:"outer",trigger:"load",name:"",isRunning:!1,initialized:!1,responseHTML:null,requestDelay:0,swapDelay:0,rawSource:null,source:null,script:"",tags:{}},m={urlPrefix:"",componentPrefix:i.prefixed()},h=["trigger","swap","name","script","tags"],v=["load","event","reactive","intersect","custom"],S=["inner","outer","target"],T=async e=>{try{let t=await fetch(e);if(!t.ok)throw t.status;return await t.text()}catch(t){throw t}},I=e=>new DOMParser().parseFromString(`<body><template>${e}</template></body>`,"text/html"),q=(e,t)=>{let s=e.split(" ");t.classList.add(...s)},b=e=>{let t=Array.from(e.querySelectorAll("[data-slot]"));return e.querySelectorAll("template:not([id])").forEach(s=>{t.push(...b(s.content))}),t},x=(e,t)=>{for(let s of e.attributes){let{name:l,value:o}=s;if(l==="_class"||l==="prop:class"){q(o,t);continue}l.startsWith("prop:")?t.setAttribute(l.substring(5),o):l.startsWith("_")&&t.setAttribute(l.substring(1),o)}},P=(e,t)=>{let s=b(t);s.length&&s.forEach(l=>{let f=(e.content??e).querySelector(`template[data-for-slot='${l.dataset.slot}']`);if(!f){l.replaceWith(...l.childNodes);return}l.replaceWith(f.content.cloneNode(!0))})},y=(e,t,s)=>{if(e.hasAttribute(t)){let l=e.getAttribute(t);e.removeAttribute(t),e.setAttribute(s,l)}},W=()=>{class e extends HTMLElement{connectedCallback(){y(this,"source","x-remote-component"),h.forEach(s=>{y(this,s,"data-rc-"+s)})}}customElements.define(m.componentPrefix+"component",e)},w=e=>{Array.isArray(e)&&e.forEach(t=>{if(!t.tag||!t.source)return;class s extends HTMLElement{connectedCallback(){this.setAttribute("x-remote-component",t.source),h.forEach(o=>{t[o]!==void 0&&this.setAttribute("data-rc-"+o,t[o]),y(this,o,"data-rc-"+o)})}}customElements.define(m.componentPrefix+t.tag,s),t.components&&w(t.components)})},R=e=>{let[t,s=0,l=0]=e.trim().split(" ");return{trigger:t,requestDelay:parseInt(s),swapDelay:parseInt(l)}},d=(e,t,s={})=>{e.dispatchEvent(new CustomEvent(t,{detail:s,bubbles:!0,composed:!0,cancelable:!0}))},E=e=>new Promise(t=>setTimeout(t,e)),C=e=>e[0]==="/",D=e=>e[0]==="#";i.$rc={defaultConfig:L,globalConfig:m,makeCustomElementComponents:w},W(),i.directive("remote-component",(e,{expression:t},{evaluate:s,cleanup:l})=>{let o=(a,n)=>{n._rcError=a,n._rcIsLoading=!1,n._rcIsLoadingWithDelay=!1,r.isRunning=!1,d(e,"rc-error",{error:a,config:r})},f=async()=>{if(r.initialized||r.isRunning||!t)return;r.isRunning=!0,d(e,"rc-before-load",r);let a=null,n=t,c=i.$data(e),g;if(!C(t)&&!D(t)&&(n=s(t)),r.source=n,r.requestDelay&&await E(r.requestDelay),c._rcIsLoading=!0,c._rcIsLoadingWithDelay=!0,C(n)){let u;try{[u,g]=await Promise.all([T(m.urlPrefix+n),r.script&&import(m.urlPrefix+r.script)]),r.responseHTML=u,a=I(u).querySelector("template")?.content}catch(p){o(p,c);return}}else if(D(n)&&(a=document.querySelector(n)?.content.cloneNode(!0),!a)){o("ID not found",c);return}if(d(e,"rc-loaded",r),c._rcError=null,c._rcIsLoading=!1,r.swapDelay&&await E(r.swapDelay),d(e,"rc-loaded-with-delay",r),c._rcIsLoadingWithDelay=!1,a){if(P(e,a),x(e,a.firstElementChild),g&&g.default&&i.plugin(g.default),d(e,"rc-before-insert",r),r.swap==="inner")i.mutateDom(()=>{e.replaceChildren(a)}),d(e,"rc-inserted",r),i.initTree(e);else if(r.swap==="outer"){let u=a.firstElementChild,p=[...a.children];i.mutateDom(()=>{i.destroyTree(e),e.replaceWith(a)}),d(u,"rc-inserted",r),p.forEach($=>{i.initTree($)})}else if(r.swap==="target"){let u=e.querySelector("[data-target]");u&&(i.mutateDom(()=>{u.replaceChildren(a)}),i.initTree(u))}}c._rcIsLoaded=!0,r.initialized=!0,r.isRunning=!1},r={...i.$rc.defaultConfig},H=[i.addScopeToNode(e,{_rc:{config:r,trigger:f,triggerEffect(...a){a.every(Boolean)&&f()}}}),i.addScopeToNode(e,i.reactive({_rcIsLoading:!1,_rcIsLoadingWithDelay:!1,_rcIsLoaded:!1,_rcError:null}))];l(()=>{H.forEach(a=>a())}),r.rawSource=t,h.forEach(a=>{let n=e.getAttribute("data-rc-"+a);if(n!==null){if(a==="trigger"){let c=R(n);v.includes(c.trigger)&&Object.assign(r,c);return}if(a==="swap"&&!S.includes(n))return;if(a==="tags"){r.tags=Object.fromEntries(n.split(" ").map(c=>[c,!0]));return}r[a]=n}}),d(e,"rc-initialized",i.$data(e)._rc),r.trigger==="load"&&f()}).before("show"),i.magic("rcRoot",e=>e.closest("[x-remote-component]"))}document.addEventListener("alpine:init",()=>{Alpine.plugin(_)});})();
